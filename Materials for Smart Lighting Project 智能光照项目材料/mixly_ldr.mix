<xml version="Mixly 2.0 rc3" board="Python ESP32@ESP32 Generic(4MB)"><block type="factory_import" id="$*q=!]ULm-)cvcoRY_+G" x="-817" y="-728"><field name="module">upip</field><next><block type="inout_analog_read_init" id="{4Dsquw1~E?wj(._P{^v"><field name="PIN_OBJ">adc#</field><value name="PIN"><shadow type="pins_analog_pin" id="de?^H9cC?n]uLsW6pR0b"><field name="PIN">35</field></shadow></value><next><block type="inout_analog_atten" id="/8D{k8c,6Vd!1`s0{5L{"><field name="atten">machine.ADC.ATTN_11DB</field><value name="PIN"><shadow type="pins_analog" id="$CRbyPxix(S3=~Mzc=`P"><field name="PIN">adc35</field></shadow></value><next><block type="variables_set" id="N?]Wn8i*B;,~/TPgaf0a"><field name="VAR">SSID</field><value name="VALUE"><block type="text" id="oWX/8o}S-v(qUl9S1=?t"><field name="TEXT">thingsboard</field></block></value><next><block type="variables_set" id="kS~YFDN|)r!63lLw2^sw"><field name="VAR">PASSWORD</field><value name="VALUE"><block type="text" id="@QRkT+1:G)_2tk4fwSnR"><field name="TEXT">thingsboard</field></block></value><next><block type="variables_set" id="1;1~()SJ]YdG#AmP,]#H"><field name="VAR">MQTT_SERVER</field><value name="VALUE"><block type="text" id="`q)Xg6,TJ[l;gOgJECC#"><field name="TEXT">192.168.1.101</field></block></value><next><block type="variables_set" id=":]DiNbH,5L8?ApXw-.L8"><field name="VAR">MQTT_PORT</field><value name="VALUE"><block type="math_number" id=";Vpt#99Fa`6HdXC0N$Ui"><field name="NUM">1883</field></block></value><next><block type="variables_set" id="v4.S;Jr.*-DTmBlWN#H;"><field name="VAR">MQTT_TOPIC_TELEMETRY</field><value name="VALUE"><block type="text" id="mO_cnaigA2OebyEa*X6$"><field name="TEXT">v1/devices/me/telemetry</field></block></value><next><block type="variables_set" id="@@@98jD#$PLm2=S,V,`{"><field name="VAR">MQTT_USER</field><value name="VALUE"><block type="text_encode" id="F|f1(t7#0lj$Lmx1CyJu"><field name="CODE">utf-8</field><field name="DIR">encode</field><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="text" id="]n(~!K$=F0V}O[BR790b"><field name="TEXT">BPLB19HFGsE7MfdB1ggX</field></block></value></block></value><next><block type="variables_set" id="|;5t$ME-1z9Di0hzQT=a"><field name="VAR">MQTT_PSWD</field><value name="VALUE"><block type="text_encode" id="W(ia0go6A!11E_wja`=q"><field name="CODE">utf-8</field><field name="DIR">encode</field><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="text" id="H]RlG)_~rUuMBE.@5.fP"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="!E+;L68r|9a]lE75/Zx2"><field name="VAR">ENTITY_NAME</field><value name="VALUE"><block type="text" id="R5AwBRYMjsY58g}sH!@N"><field name="TEXT">LDR</field></block></value><next><block type="network_init" id="+#UUgl;.MHh6rI?bZO!J"><field name="mode">STA</field><value name="VAR"><shadow type="variables_get" id="8_zideFs2H4DGY?a6eSl"><field name="VAR">wlan</field></shadow></value><next><block type="network_open" id="nf}2t2vv}Bvy`XLyhpe~"><field name="op">True</field><value name="VAR"><shadow type="variables_get" id="{tEM8=v)|pj}C=nDnfox"><field name="VAR">wlan</field></shadow></value><next><block type="network_connect" id="yL#+M.].ad5rZGA5=B_E"><value name="VAR"><shadow type="variables_get" id="UtbN-A_z!YB}RD5Rqf2B"><field name="VAR">wlan</field></shadow></value><value name="id"><shadow type="text"><field name="TEXT">127.16.0.8</field></shadow><block type="variables_get" id="KK-e.^sVuYH=i6W0BPyF"><field name="VAR">SSID</field></block></value><value name="password"><shadow type="text"><field name="TEXT">01234567</field></shadow><block type="variables_get" id="deS,OY4aV{GuijRNpET7"><field name="VAR">PASSWORD</field></block></value><next><block type="do_while" id="Ui++VUP]6kM$mipU6;]4"><field name="type">true</field><statement name="input_data"><block type="system_print_inline" id="W{T,mKBddFznFs]yig^C"><value name="VAR"><shadow type="text" id="}?Q/;Xkh-Cb58b{!fh$4"><field name="TEXT">.</field></shadow></value><next><block type="controls_delay" id="8-]$4M{Q:8m[7w/O[NYL"><field name="Time">ms</field><value name="DELAY_TIME"><shadow type="math_number" id="llrpN|/C[2fn6c^x#un#"><field name="NUM">1000</field></shadow></value></block></next></block></statement><value name="select_data"><block type="network_wifi_connect" id="!|Mr2XLjQtug}t!7BkE:"><value name="VAR"><shadow type="variables_get" id="w0)1a,TvH)h99maPPBPd"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="system_print" id="a*z31VUS$xQ)~m;(o!@S"><value name="VAR"><shadow type="text" id="0(oR|ih|SNQu~CfhPpdR"><field name="TEXT"></field></shadow></value><next><block type="system_print" id="dv.vOi:QI;=:vu^[KUAp"><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="network_get_connect" id="us}V:MPd1Kozu{=P=PIy"><field name="mode">0</field><value name="VAR"><shadow type="variables_get" id="da)XRF([kbwjl^i+Q+O?"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="system_print" id="1,.jH8duXxUa]J?I5UiR"><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="network_get_connect" id="1BwC{x=hNO|Rl[tGKSD#"><field name="mode">1</field><value name="VAR"><shadow type="variables_get" id="zpxV]W(=);}3p$#vxQ52"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="system_print" id="~t]2^w8soDbdpD#iGgBp"><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="network_get_connect" id="}t_Iwb]3ji]nwfEv=U#8"><field name="mode">2</field><value name="VAR"><shadow type="variables_get" id="svHN[ei95:~q2b[Gn}P*"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="controls_try_finally" id="d!#X_kYnK9Faj/D$.B_f"><mutation elseif="1"></mutation><statement name="try"><block type="factory_block" id="uIF?L2G=Uken4H|Fw}*E"><field name="VALUE">from umqtt.simple import MQTTClient</field></block></statement><statement name="DO1"><block type="factory_function_noreturn" id="K*@-KigAGy#:W]G2Ki1G"><mutation items="1"><arg name="x"></arg></mutation><field name="NAME">upip.install</field><value name="ADD0"><block type="text" id="!]ELsWvX+z|0-gLh8ggg"><field name="TEXT">micropython-umqtt.simple</field></block></value><next><block type="factory_block" id="qdX^!NRmemYP4+`gJhKC"><field name="VALUE">from umqtt.simple import MQTTClient</field></block></next></block></statement><next><block type="variables_set" id="3^oc2xBzAqU~7+G1B_!]"><field name="VAR">mqttc</field><value name="VALUE"><block type="factory_function_return" id="z76gKfKfs`KCr1ITupu,"><mutation items="5"><arg name="x"></arg><arg name="x"></arg><arg name="x"></arg><arg name="x"></arg><arg name="x"></arg></mutation><field name="NAME">MQTTClient</field><value name="ADD0"><block type="text" id="D~#jH9X:~i}HGU`Vh=LU"><field name="TEXT">LDR</field></block></value><value name="ADD1"><block type="variables_get" id="yvg)x1#DZ_LsA,kD3fcC"><field name="VAR">MQTT_SERVER</field></block></value><value name="ADD2"><block type="variables_get" id="sdL^4a=o_9Qly|~e|i)+"><field name="VAR">MQTT_PORT</field></block></value><value name="ADD3"><block type="variables_get" id="aa9@Ms:r=(-Hgq~xX2,/"><field name="VAR">MQTT_USER</field></block></value><value name="ADD4"><block type="variables_get" id="/;iteGSHtNE@CpWz1[K9"><field name="VAR">MQTT_PSWD</field></block></value></block></value><next><block type="factory_function_noreturn" id="6m/)sz|=/pvE!k*R1!aW"><mutation items="1"><arg name="x"></arg></mutation><field name="NAME">mqttc.connect</field><next><block type="controls_whileUntil" id="O`k1[GxQU9]pY/d{OFFA"><field name="MODE">WHILE</field><value name="BOOL"><shadow type="logic_boolean" id="Xhl8`d_9~s|,vXbPF+2h"><field name="BOOL">TRUE</field></shadow></value><statement name="DO"><block type="controls_try_finally" id="ie}Bf{)BlmkD)2*`~i#z"><mutation else="1"></mutation><statement name="try"><block type="dicts_create_with" id="OP,0Bv2R6kSVxP8wH;6U"><mutation items="1"></mutation><field name="VAR">payload</field><field name="KEY0">"intensity"</field><value name="ADD0"><block type="inout_analog_read" id="(VcP9]J{/}(b=:ip}10j"><value name="PIN"><shadow type="pins_analog" id="~GI|H,#!4m}|.t(bf9KT"><field name="PIN">adc35</field></shadow></value></block></value><next><block type="system_print" id="}WBb#BB#*GMGy*u;?;v9"><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="text_format_noreturn" id="cG$v-${Up+X3`j9O^?^Z"><mutation items="1"></mutation><value name="VAR"><shadow type="text" id="CVnQpL@jf#={RN7Ju0MK"><field name="TEXT">Payload: {}</field></shadow></value><value name="ADD0"><block type="variables_get" id="!M@|_f85+a9_~qp^$LfQ"><field name="VAR">payload</field></block></value></block></value><next><block type="factory_function_noreturn" id=".,V{g7mhhJG:ebImSV^d"><mutation items="2"><arg name="x"></arg><arg name="x"></arg></mutation><field name="NAME">mqttc.publish</field><value name="ADD0"><block type="variables_get" id="uEJL#uOMYr{W/Mw]$w3N"><field name="VAR">MQTT_TOPIC_TELEMETRY</field></block></value><value name="ADD1"><block type="text_encode" id="SO7Ywlg$}4P)3WITI+EN"><field name="CODE">utf-8</field><field name="DIR">encode</field><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="number_to_text" id="*79;{3T/wg`|.q0@uQ*W"><value name="VAR"><shadow type="variables_get"><field name="VAR">x</field></shadow><block type="variables_get" id="o;+Y5[:*ko0O9;D^YSS+"><field name="VAR">payload</field></block></value></block></value></block></value></block></next></block></next></block></statement><statement name="ELSE"><block type="controls_if" id=":~s_7-5#]leF-5,tAT.d"><value name="IF0"><block type="logic_negate" id="#=*Kwb{D?]5j{1P=YZKt"><value name="BOOL"><block type="network_wifi_connect" id=".!R(GTifB`~hYEX_b|/J"><value name="VAR"><shadow type="variables_get" id="`vlC)v=qA!C.?qb:~NDL"><field name="VAR">wlan</field></shadow></value></block></value></block></value><statement name="DO0"><block type="network_connect" id=",UkntmLpW].Xi#e,k:c5"><value name="VAR"><shadow type="variables_get" id="*1GW4rfUq-Rf)3vN5eg,"><field name="VAR">wlan</field></shadow></value><value name="id"><shadow type="text"><field name="TEXT">127.16.0.8</field></shadow><block type="variables_get" id="fPI49ZQ!qgaikyI!P3=+"><field name="VAR">SSID</field></block></value><value name="password"><shadow type="text"><field name="TEXT">01234567</field></shadow><block type="variables_get" id="rXec[O+KQ9VqD=vk/#b/"><field name="VAR">PASSWORD</field></block></value></block></statement><next><block type="factory_function_noreturn" id="9Azc$K.Bhwg@C|(FoTD."><mutation items="1"><arg name="x"></arg></mutation><field name="NAME">mqttc.connect</field></block></next></block></statement><next><block type="controls_delay" id="K7@WwNq0~s5V+aq^Gm6z"><field name="Time">ms</field><value name="DELAY_TIME"><shadow type="math_number" id="6nM@ie:[C{,v2own_T(k"><field name="NUM">5000</field></shadow></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></xml><code>aW1wb3J0IHVwaXAKaW1wb3J0IG1hY2hpbmUKaW1wb3J0IG5ldHdvcmsKaW1wb3J0IHRpbWUKCgphZGMzNSA9IG1hY2hpbmUuQURDKG1hY2hpbmUuUGluKDM1KSkKYWRjMzUuYXR0ZW4obWFjaGluZS5BREMuQVRUTl8xMURCKQpTU0lEID0gJ3RoaW5nc2JvYXJkJwpQQVNTV09SRCA9ICd0aGluZ3Nib2FyZCcKTVFUVF9TRVJWRVIgPSAnMTkyLjE2OC4xLjEwMScKTVFUVF9QT1JUID0gMTg4MwpNUVRUX1RPUElDX1RFTEVNRVRSWSA9ICd2MS9kZXZpY2VzL21lL3RlbGVtZXRyeScKTVFUVF9VU0VSID0gJ0JQTEIxOUhGR3NFN01mZEIxZ2dYJy5lbmNvZGUoInV0Zi04IikKTVFUVF9QU1dEID0gJycuZW5jb2RlKCJ1dGYtOCIpCkVOVElUWV9OQU1FID0gJ0xEUicKd2xhbiA9IG5ldHdvcmsuV0xBTihuZXR3b3JrLlNUQV9JRik7CndsYW4uYWN0aXZlKFRydWUpCndsYW4uY29ubmVjdChTU0lELFBBU1NXT1JEKQp3aGlsZSBUcnVlOgogICAgcHJpbnQoJy4nLGVuZCA9IiIpCiAgICB0aW1lLnNsZWVwX21zKDEwMDApCiAgICBpZiAod2xhbi5pc2Nvbm5lY3RlZCgpKToKICAgICAgICBicmVhawpwcmludCgnJykKcHJpbnQod2xhbi5pZmNvbmZpZygpWzBdKQpwcmludCh3bGFuLmlmY29uZmlnKClbMV0pCnByaW50KHdsYW4uaWZjb25maWcoKVsyXSkKdHJ5OgogICAgZnJvbSB1bXF0dC5zaW1wbGUgaW1wb3J0IE1RVFRDbGllbnQKZXhjZXB0OgogICAgdXBpcC5pbnN0YWxsKCdtaWNyb3B5dGhvbi11bXF0dC5zaW1wbGUnKQogICAgZnJvbSB1bXF0dC5zaW1wbGUgaW1wb3J0IE1RVFRDbGllbnQKbXF0dGMgPSBNUVRUQ2xpZW50KCdMRFInLCBNUVRUX1NFUlZFUiwgTVFUVF9QT1JULCBNUVRUX1VTRVIsIE1RVFRfUFNXRCkKbXF0dGMuY29ubmVjdCgpCndoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgICAgcGF5bG9hZD0geyJpbnRlbnNpdHkiOmFkYzM1LnJlYWRfdTE2KCl9CiAgICAgICAgcHJpbnQoJ1BheWxvYWQ6IHt9Jy5mb3JtYXQocGF5bG9hZCkpCiAgICAgICAgbXF0dGMucHVibGlzaChNUVRUX1RPUElDX1RFTEVNRVRSWSwgc3RyKHBheWxvYWQpLmVuY29kZSgidXRmLTgiKSkKICAgIGZpbmFsbHk6CiAgICAgICAgaWYgbm90IHdsYW4uaXNjb25uZWN0ZWQoKToKICAgICAgICAgICAgd2xhbi5jb25uZWN0KFNTSUQsUEFTU1dPUkQpCiAgICAgICAgbXF0dGMuY29ubmVjdCgpCiAgICB0aW1lLnNsZWVwX21zKDUwMDApCg==</code>