<xml version="Mixly 2.0 rc3" board="Python ESP32@ESP32 Generic(4MB)"><block type="factory_import" id="dIR?Nak[0pKIW*@![sQ(" x="-817" y="-728"><field name="module">upip</field><next><block type="inout_analog_read_init" id=")--@ZTWzgW@e@Q`X+bT0"><field name="PIN_OBJ">adc#</field><value name="PIN"><shadow type="pins_analog_pin" id="-6YeD9Z9qWgFlZ.=L@Qi"><field name="PIN">35</field></shadow></value><next><block type="inout_analog_atten" id="b/-[=A73$f;bagwrJKxd"><field name="atten">machine.ADC.ATTN_11DB</field><value name="PIN"><shadow type="pins_analog" id="71WWsH46{b]`(`0Lnh]G"><field name="PIN">adc35</field></shadow></value><next><block type="variables_set" id="ZLCvzbaw}TUR/~n/SZ#j"><field name="VAR">SSID</field><value name="VALUE"><block type="text" id="]A`jvt#il6(c-IZI+9{l"><field name="TEXT">thingsboard</field></block></value><next><block type="variables_set" id="BLXNiJpQJH3@C-s*OI_~"><field name="VAR">PASSWORD</field><value name="VALUE"><block type="text" id="cGZoZ`8b#{K.3[q*+K+3"><field name="TEXT">thingsboard</field></block></value><next><block type="variables_set" id="D}d9@ZpB_kyS1YTB+h3,"><field name="VAR">MQTT_SERVER</field><value name="VALUE"><block type="text" id="v{PEiqTwAjkF5z`QzDy1"><field name="TEXT">192.168.1.101</field></block></value><next><block type="variables_set" id="/wiZ2vJrZe|:n7Jb4ziy"><field name="VAR">MQTT_PORT</field><value name="VALUE"><block type="math_number" id="UaDfKIo=qA;jFd{EqRId"><field name="NUM">1883</field></block></value><next><block type="variables_set" id="~bywORcj6`GOi!70e[jx"><field name="VAR">MQTT_TOPIC_TELEMETRY</field><value name="VALUE"><block type="text" id="T_Q[WmJ)OT;=7e?A$Y}j"><field name="TEXT">v1/devices/me/telemetry</field></block></value><next><block type="variables_set" id="{OPs=em?3LQo@,6sA-27"><field name="VAR">MQTT_USER</field><value name="VALUE"><block type="text_encode" id="2NnZ*8gi0I2?yh#Ol7dI"><field name="CODE">utf-8</field><field name="DIR">encode</field><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="text" id="ynqhGETB4m8WzxQXOLq_"><field name="TEXT">BPLB19HFGsE7MfdB1ggX</field></block></value></block></value><next><block type="variables_set" id="]jnA)UQFKn@1Z9,*~S.Q"><field name="VAR">MQTT_PSWD</field><value name="VALUE"><block type="text_encode" id="Ags6ZIdoT]KA9ZQTVd7V"><field name="CODE">utf-8</field><field name="DIR">encode</field><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="text" id="-bk9.X~eVk6J3lsDN[qk"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="i*Z~hOshr|kF-j6Oh[`}"><field name="VAR">ENTITY_NAME</field><value name="VALUE"><block type="text" id="+K7aMfc0_K,(b_osjtT7"><field name="TEXT">LDR</field></block></value><next><block type="network_init" id="Z@.A/I8*z16aBBGn5oqU"><field name="mode">STA</field><value name="VAR"><shadow type="variables_get" id="-)QJ903bZp3p3HMASsH`"><field name="VAR">wlan</field></shadow></value><next><block type="network_open" id="iEMH#WPi9(bjLhsUIh:f"><field name="op">True</field><value name="VAR"><shadow type="variables_get" id="s8$ossyzi$m.L=-`s/}V"><field name="VAR">wlan</field></shadow></value><next><block type="network_connect" id="s?nLz7Xh.1Dc3bb3+`cN"><value name="VAR"><shadow type="variables_get" id="^H]i:Iogu+TlNSIKjP,X"><field name="VAR">wlan</field></shadow></value><value name="id"><shadow type="text"><field name="TEXT">127.16.0.8</field></shadow><block type="variables_get" id="N4DiQ8:Q1(lfxw{5BeK2"><field name="VAR">SSID</field></block></value><value name="password"><shadow type="text"><field name="TEXT">01234567</field></shadow><block type="variables_get" id="F]E7!fazf,nEH5W,5PeO"><field name="VAR">PASSWORD</field></block></value><next><block type="do_while" id="+)jDHr#gTMhqCcZ/fFR$"><field name="type">true</field><statement name="input_data"><block type="system_print_inline" id="|cQQb/8`VSXEdJHVPEe`"><value name="VAR"><shadow type="text" id="z9q@Moz!uR?k(vP^TMDN"><field name="TEXT">.</field></shadow></value><next><block type="controls_delay" id="9jQi?Tp_;-}9MB(6hv}N"><field name="Time">ms</field><value name="DELAY_TIME"><shadow type="math_number" id="K-`}`y5o+JD*8sIn;#@u"><field name="NUM">1000</field></shadow></value></block></next></block></statement><value name="select_data"><block type="network_wifi_connect" id="nLOUQ_VSu9Sv.-r{3zMg"><value name="VAR"><shadow type="variables_get" id="3;])ueMd+Y[Cy6G7p]uc"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="system_print" id="9nde.9]P,leTs6qsqAYe"><value name="VAR"><shadow type="text" id="dzfZ`}V{l|-FFg/k(EC1"><field name="TEXT"></field></shadow></value><next><block type="system_print" id="`JWqRlj7vjs1zYP,*(E="><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="network_get_connect" id="39T/F}23yDzSkoq_/4tC"><field name="mode">0</field><value name="VAR"><shadow type="variables_get" id="VPA5z@Jd2^C]r.)P/;l|"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="system_print" id="hrubgD/W3v:L6mtSND71"><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="network_get_connect" id="0MgoE0a(TNb8B*uT8$Qi"><field name="mode">1</field><value name="VAR"><shadow type="variables_get" id="L,:VE,w{]ypQsuO34^OZ"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="system_print" id="!I`JKZwq}Mn+kaokzXUO"><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="network_get_connect" id=",ACw7}xj+I9917$lzmQX"><field name="mode">2</field><value name="VAR"><shadow type="variables_get" id="Zp;IF/p87V+dGu)zWzYf"><field name="VAR">wlan</field></shadow></value></block></value><next><block type="controls_try_finally" id=".w2xiGCkKVCxLcX7h8g~"><mutation elseif="1"></mutation><statement name="try"><block type="factory_block" id="r2]L]-_}t7VHs*61=(fZ"><field name="VALUE">from umqtt.simple import MQTTClient</field></block></statement><statement name="DO1"><block type="factory_function_noreturn" id="b8RXQ1XIj#FUWkxXD+Ks"><mutation items="1"><arg name="x"></arg></mutation><field name="NAME">upip.install</field><value name="ADD0"><block type="text" id="wyOHx7wtf,qi.Ll?[6pk"><field name="TEXT">micropython-umqtt.simple</field></block></value><next><block type="factory_block" id="i?.^kE;FBiJeX],+F!Kc"><field name="VALUE">from umqtt.simple import MQTTClient</field></block></next></block></statement><next><block type="variables_set" id="_vsN!d,`(soWN9SCsgV;"><field name="VAR">mqttc</field><value name="VALUE"><block type="factory_function_return" id="9X]BV_JgWd#k!HxR1T]`"><mutation items="5"><arg name="x"></arg><arg name="x"></arg><arg name="x"></arg><arg name="x"></arg><arg name="x"></arg></mutation><field name="NAME">MQTTClient</field><value name="ADD0"><block type="text" id="3];hm]g4EmEaWL?GhF8~"><field name="TEXT">LDR</field></block></value><value name="ADD1"><block type="variables_get" id="i|VIXnA.C8TsBbd!jOEF"><field name="VAR">MQTT_SERVER</field></block></value><value name="ADD2"><block type="variables_get" id="NAg4A8M)#4I;*9pY$L,["><field name="VAR">MQTT_PORT</field></block></value><value name="ADD3"><block type="variables_get" id="c~t6!(@[oW_/plDm7VZD"><field name="VAR">MQTT_USER</field></block></value><value name="ADD4"><block type="variables_get" id="b4pgxr$~k:m)wBg`8ei#"><field name="VAR">MQTT_PSWD</field></block></value></block></value><next><block type="factory_function_noreturn" id=")_DmyDj})Vg4M?)]H}lg"><mutation items="1"><arg name="x"></arg></mutation><field name="NAME">mqttc.connect</field><next><block type="controls_whileUntil" id="Y)odX`S|g00wK_0}bo./"><field name="MODE">WHILE</field><value name="BOOL"><shadow type="logic_boolean" id=";;;S=Um6Lp=wKDi,wQ-8"><field name="BOOL">TRUE</field></shadow></value><statement name="DO"><block type="controls_try_finally" id=",=;vN+JY40zf|zR1CFE_"><mutation elseif="1"></mutation><statement name="try"><block type="dicts_create_with" id="_?MB+;P:7}i=mIGL)V(X"><mutation items="1"></mutation><field name="VAR">payload</field><field name="KEY0">"intensity"</field><value name="ADD0"><block type="inout_analog_read" id="gYGaBc+^aI,zvc*Bt|EO"><value name="PIN"><shadow type="pins_analog" id="_`~B.gv3:=/Tm`$}8V]r"><field name="PIN">adc35</field></shadow></value></block></value><next><block type="system_print" id="zX::wXSt2q.u_a?+],zG"><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="text_format_noreturn" id="bb.pGfcPdx;9i2W@2?[6"><mutation items="1"></mutation><value name="VAR"><shadow type="text" id="-H2R!TgWXDxPc_cu[nTu"><field name="TEXT">Payload: {}</field></shadow></value><value name="ADD0"><block type="variables_get" id="ofjw?h=p(,|I)?U`oD|@"><field name="VAR">payload</field></block></value></block></value><next><block type="factory_function_noreturn" id="YK1I*RWk#ocG85oNVk$a"><mutation items="2"><arg name="x"></arg><arg name="x"></arg></mutation><field name="NAME">mqttc.publish</field><value name="ADD0"><block type="variables_get" id="+[)|5yNYrLb{^S/U]QKV"><field name="VAR">MQTT_TOPIC_TELEMETRY</field></block></value><value name="ADD1"><block type="text_encode" id="[lWiKqY`nH-=Z$Ac^/x-"><field name="CODE">utf-8</field><field name="DIR">encode</field><value name="VAR"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="number_to_text" id="o[=Rs(};k;I[FLd89ss3"><value name="VAR"><shadow type="variables_get"><field name="VAR">x</field></shadow><block type="variables_get" id="fTv8e+al;CBnR??#@14^"><field name="VAR">payload</field></block></value></block></value></block></value></block></next></block></next></block></statement><statement name="DO1"><block type="controls_if" id="KVp`A/pe*Ejz1B}^@y#)"><value name="IF0"><block type="logic_negate" id="3(^mcd!U@Qh-$Q~K-Vn-"><value name="BOOL"><block type="network_wifi_connect" id="O;U2rGxy_qvYn`Hf-R*?"><value name="VAR"><shadow type="variables_get" id="GuF;irt|XBt9r_oc{Qj]"><field name="VAR">wlan</field></shadow></value></block></value></block></value><statement name="DO0"><block type="network_connect" id=":|:US9cM.0o4?9c!iO`D"><value name="VAR"><shadow type="variables_get" id="oU+AXyIHWKaAwL8]ozlQ"><field name="VAR">wlan</field></shadow></value><value name="id"><shadow type="text"><field name="TEXT">127.16.0.8</field></shadow><block type="variables_get" id=".82j@(m;`$xS}6yJd{8#"><field name="VAR">SSID</field></block></value><value name="password"><shadow type="text"><field name="TEXT">01234567</field></shadow><block type="variables_get" id="1HE^[5VKe?5,vXG~e_7b"><field name="VAR">PASSWORD</field></block></value></block></statement><next><block type="factory_function_noreturn" id=":Flb3E1sW03K@U@)*]8?"><mutation items="1"><arg name="x"></arg></mutation><field name="NAME">mqttc.connect</field></block></next></block></statement><next><block type="controls_delay" id="s]:?tHa(__5x./JaS5Wp"><field name="Time">ms</field><value name="DELAY_TIME"><shadow type="math_number" id="1A9M0k.Z$fTio|4fh@:L"><field name="NUM">5000</field></shadow></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></xml><code>aW1wb3J0IHVwaXAKaW1wb3J0IG1hY2hpbmUKaW1wb3J0IG5ldHdvcmsKaW1wb3J0IHRpbWUKCgphZGMzNSA9IG1hY2hpbmUuQURDKG1hY2hpbmUuUGluKDM1KSkKYWRjMzUuYXR0ZW4obWFjaGluZS5BREMuQVRUTl8xMURCKQpTU0lEID0gJ3RoaW5nc2JvYXJkJwpQQVNTV09SRCA9ICd0aGluZ3Nib2FyZCcKTVFUVF9TRVJWRVIgPSAnMTkyLjE2OC4xLjEwMScKTVFUVF9QT1JUID0gMTg4MwpNUVRUX1RPUElDX1RFTEVNRVRSWSA9ICd2MS9kZXZpY2VzL21lL3RlbGVtZXRyeScKTVFUVF9VU0VSID0gJ0JQTEIxOUhGR3NFN01mZEIxZ2dYJy5lbmNvZGUoInV0Zi04IikKTVFUVF9QU1dEID0gJycuZW5jb2RlKCJ1dGYtOCIpCkVOVElUWV9OQU1FID0gJ0xEUicKd2xhbiA9IG5ldHdvcmsuV0xBTihuZXR3b3JrLlNUQV9JRik7CndsYW4uYWN0aXZlKFRydWUpCndsYW4uY29ubmVjdChTU0lELFBBU1NXT1JEKQp3aGlsZSBUcnVlOgogICAgcHJpbnQoJy4nLGVuZCA9IiIpCiAgICB0aW1lLnNsZWVwX21zKDEwMDApCiAgICBpZiAod2xhbi5pc2Nvbm5lY3RlZCgpKToKICAgICAgICBicmVhawpwcmludCgnJykKcHJpbnQod2xhbi5pZmNvbmZpZygpWzBdKQpwcmludCh3bGFuLmlmY29uZmlnKClbMV0pCnByaW50KHdsYW4uaWZjb25maWcoKVsyXSkKdHJ5OgogICAgZnJvbSB1bXF0dC5zaW1wbGUgaW1wb3J0IE1RVFRDbGllbnQKZXhjZXB0OgogICAgdXBpcC5pbnN0YWxsKCdtaWNyb3B5dGhvbi11bXF0dC5zaW1wbGUnKQogICAgZnJvbSB1bXF0dC5zaW1wbGUgaW1wb3J0IE1RVFRDbGllbnQKbXF0dGMgPSBNUVRUQ2xpZW50KCdMRFInLCBNUVRUX1NFUlZFUiwgTVFUVF9QT1JULCBNUVRUX1VTRVIsIE1RVFRfUFNXRCkKbXF0dGMuY29ubmVjdCgpCndoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgICAgcGF5bG9hZD0geyJpbnRlbnNpdHkiOmFkYzM1LnJlYWRfdTE2KCl9CiAgICAgICAgcHJpbnQoJ1BheWxvYWQ6IHt9Jy5mb3JtYXQocGF5bG9hZCkpCiAgICAgICAgbXF0dGMucHVibGlzaChNUVRUX1RPUElDX1RFTEVNRVRSWSwgc3RyKHBheWxvYWQpLmVuY29kZSgidXRmLTgiKSkKICAgIGV4Y2VwdDoKICAgICAgICBpZiBub3Qgd2xhbi5pc2Nvbm5lY3RlZCgpOgogICAgICAgICAgICB3bGFuLmNvbm5lY3QoU1NJRCxQQVNTV09SRCkKICAgICAgICBtcXR0Yy5jb25uZWN0KCkKICAgIHRpbWUuc2xlZXBfbXMoNTAwMCkK</code>